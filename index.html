<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="O31NJDv3bMJOwDuqZVrZd3P7e9gLwL_RcgFv9P4jPV0" />
    <meta name="yandex-verification" content="f3cd06ace0e73f71" />
    <title>StoryAnvil</title>
    <meta property="og:title" content="StoryAnvil">
    <meta property="og:description" content="We make minecraft content like mods and modpacks" />
    <meta name="description" content="We make minecraft content like mods, modpacks, datapacks and resourcepacks" />
    <meta name="keywords"
        content="minecraft,storyanvil,mc,minecraft mods,minecraft datapacks,minecraft resourcepacks,minecraft modpacks" />
    <link rel="stylesheet" href="./assets/css.css">
    <style>
        /** {outline: 2px green solid !important;}*/
        .cogwheel {
            -webkit-user-select: none;
            user-select: none;
        }

        @keyframes cogwheel {
            0% {
                rotate: 0deg;
            }

            100% {
                rotate: 360deg;
            }
        }

        @keyframes uncogwheel {
            0% {
                rotate: 360deg;
            }

            100% {
                rotate: 00deg;
            }
        }

        #banner {
            width: 100%;
            box-sizing: border-box;
            border: none;
            text-align: center;
            padding-top: 30vh;
            padding-bottom: 25vh;
            background-color: rgb(34, 34, 34);
            position: relative;
        }

        html,
        body {
            border: none;
            margin: 0px;
            padding: 0px;
            background: rgb(70, 70, 70);
            color: white;
            font-family: "JetBrains Mono", monospace;
        }

        .logoText {
            text-align: center;
            font-size: 5rem;
            position: relative;
            font-optical-sizing: auto;
            font-weight: regular;
            font-style: normal;
        }

        #cgwh-0 {
            position: absolute;
            right: 0px;
            z-index: 1;
            transform: translate(0%, -18%) scale(1.25);

        }

        #cgwh-0- {
            animation: uncogwheel 3.6s infinite linear;
        }

        #cgwh-1 {
            position: absolute;
            right: 0px;
            z-index: 1;
            transform: translate(-80%, -85%) scale(1);
        }

        #cgwh-1- {
            animation: cogwheel 3.6s infinite linear;
        }

        #cgwh-2 {
            position: absolute;
            right: 0px;
            z-index: 1;
            transform: translate(-170%, -70%) scale(0.9);
        }

        #cgwh-2- {
            animation: uncogwheel 3.6s infinite linear;
        }

        #cgwh-3 {
            position: absolute;
            right: 0px;
            z-index: 1;
            transform: translate(-80%, -20%) scale(0.5);
        }

        #cgwh-3- {
            /*animation: uncogwheel 3.6s infinite linear;*/
        }

        #cgwh-4- {
            position: absolute;
            right: 0px;
            z-index: 1;
            transform: translate(-63%, -52%) scale(0.5);
        }

        #header {
            background-color: rgb(19, 19, 19);
        }

        .menu {
            background: none;
            border: none;
            outline: none;
            color: white;
            font-size: larger;
            padding: 5px;
            margin: 10px;
            font-family: "JetBrains Mono", monospace;
        }

        .menu- {
            text-decoration: none;
        }

        h2 {
            font-size: 2.5rem;
            text-align: center;
        }

        h3 {
            font-size: 1.8rem;
            text-align: left;
            padding-left: 15px;
        }

        .logoStatic {
            display: none;
        }

        @media (max-width: 700px) {
            .logoText {
                display: none !important;
            }

            .logoStatic {
                display: block !important;
            }

            .logoStatic img {
                width: 80%;
            }

            #banner {
                padding-top: 10vh;
                padding-bottom: 10vh;
            }
        }

        .pr-card {
            background: rgb(34, 34, 34);
            height: 400px;
            max-width: 400px;
            min-width: 300px;
            width: 400px;
            margin: 30px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .pr-banner {
            width: 100%;
            filter: brightness(0.8);
        }

        .pr-logo {
            position: absolute;
            width: 30%;
            border-radius: 15px;
            top: 50%;
            left: 10px;
            transform: translate(0, -50%);
        }

        .pr-active {
            border: 2px solid purple;
        }
    </style>
</head>

<body style="position: relative;">
    <div id="header">
        <a class="menu-" href="https://storyanvil.github.io">
            <button class="menu">
                STORY<b>ANVIL</b>
            </button>
        </a>
        <a class="menu-" href="https://storyanvil.github.io/page?wiki=home">
            <button class="menu">
                Wiki
            </button>
        </a>
        <a class="menu-" href="https://github.com/StoryAnvil" target="_blank" rel="noopener">
            <button class="menu">
                GitHub
            </button>
        </a>
        <a class="menu-" href="https://www.curseforge.com/members/denisjaved/projects" target="_blank" rel="noopener">
            <button class="menu">
                CurseForge
            </button>
        </a>
        <a class="menu-" href="https://modrinth.com/organization/story-anvil" target="_blank" rel="noopener">
            <button class="menu">
                Modrinth
            </button>
        </a>
    </div>
    <div id="homepage">
        <div id="banner">
            <span class="logoText">
                <span id="cgwh-0">
                    <img id="cgwh-0-" class="cogwheel" title="StoryAnvil logo cogwheel" src="./assets/cogwheel.svg">
                </span>
                <span id="cgwh-1">
                    <img id="cgwh-1-" class="cogwheel" title="StoryAnvil logo cogwheel" src="./assets/cogwheel2.svg">
                </span>
                <span id="cgwh-2">
                    <img id="cgwh-2-" class="cogwheel" title="StoryAnvil logo cogwheel" src="./assets/cogwheel1.svg">
                </span>
                <span id="cgwh-3">
                    <img id="cgwh-3-" class="cogwheel" title="StoryAnvil logo bell" src="./assets/bell.svg">
                </span>
                <img id="cgwh-4-" class="cogwheel" title="StoryAnvil logo hammer" src="./assets/hammer.svg">
                <span style="z-index: 2; position: relative; color: white;">
                    STORY<b>ANVIL</b>
                </span>
            </span>
            <span class="logoStatic">
                <img src="./assets/StoryAnvil.svg">
            </span>
        </div>
        <div>
            <h2>Projects</h2>
            <div>
                <h3 style="display: block; margin-bottom: 0px; user-select: none;" id="prlist_rp_title"
                    onclick="let e = this.parentElement.children; e = e[e.length - 1]; e.style.display = (e.style.display == 'none' ? 'flex' : 'none')">
                    Resource packs</h3>
                <div style="display: flex; flex-direction: row; flex-wrap: nowrap; overflow-x: auto;" id="prlist_rp">
                </div>
            </div>
            <div>
                <h3 style="display: block; margin-bottom: 0px; user-select: none;" id="prlist_mods_title"
                    onclick="let e = this.parentElement.children; e = e[e.length - 1]; e.style.display = (e.style.display == 'none' ? 'flex' : 'none')">
                    Mods / Data packs</h3>
                <div style="display: flex; flex-direction: row; flex-wrap: nowrap; overflow-x: auto;" id="prlist_mods">
                </div>
            </div>
            <div>
                <h3 style="display: block; margin-bottom: 0px; user-select: none;" id="prlist_modpacks_title"
                    onclick="let e = this.parentElement.children; e = e[e.length - 1]; e.style.display = (e.style.display == 'none' ? 'flex' : 'none')">
                    Modpacks</h3>
                <div style="display: flex; flex-direction: row; flex-wrap: nowrap; overflow-x: auto;"
                    id="prlist_modpacks">
                </div>
            </div>
            <div>
                <h3 style="display: block; margin-bottom: 0px; user-select: none;" id="prlist_archived_title"
                    onclick="let e = this.parentElement.children; e = e[e.length - 1]; e.style.display = (e.style.display == 'none' ? 'flex' : 'none'); document.getElementById('f4394m9jx4').remove()">
                    Archived</h3>
                <span id="f4394m9jx4" style="padding-left: 30px;">[click archived to expand]</span>
                <div style="display: none; flex-direction: row; flex-wrap: nowrap; overflow-x: auto;"
                    id="prlist_archived">
                </div>
            </div>
        </div>
    </div>

    <div id="downloadprompt"
        style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgb(34, 34, 34); z-index: 999; padding: 50px; border-radius: 15px;">
        <h2 id="dwntitle"></h2>
        <div id="dwnbody" style="text-align: center;">

        </div>
    </div>

    <div id="copyrightnotice" style="display: none;">
        NOT AN OFFICIAL MINECRAFT PRODUCT. NOT APPROVED BY OR ASSOCIATED WITH MOJANG.
        Minecraft is copyright Mojang Studios and is not affiliated with this site.
    </div>
    <div id="copyrightnoticeRaw" style="display: block;">
        NOT AN OFFICIAL MINECRAFT PRODUCT. NOT APPROVED BY OR ASSOCIATED WITH MOJANG.
        Minecraft is copyright Mojang Studios and is not affiliated with this site.
    </div>

    <script>
        const url = new URL(document.location);
        const typeToId = {
            "modpack": "prlist_modpacks",
            "mod": "prlist_mods",
            "datapack": "prlist_mods",
            "resource pack": "prlist_rp"
        }
        let idToElement = {
            "prlist_modpacks": document.getElementById("prlist_modpacks"),
            "prlist_mods": document.getElementById("prlist_mods"),
            "prlist_rp": document.getElementById("prlist_rp"),
            "prlist_archived": document.getElementById("prlist_archived")
        }

        let projects;
        let $html = {
            "prlist_modpacks": "",
            "prlist_mods": "",
            "prlist_rp": "",
            "prlist_archived": ""
        };
        let $waitList = {};
        let $buildWaitList = {};
        let buildWaiter;
        fetch("https://raw.githubusercontent.com/StoryAnvil/BlogAndWiki/master/projects.json", {
            method: "GET"
        }).then((response) => {
            response.json().then(
                (data) => {
                    projects = data;
                    start();
                }
            ).catch((reason) => {
                alert("Failed to load projects. Check your internet connection!");
                console.warn(reason);
            })
        }).catch((reason) => {
            alert("Failed to load projects. Check your internet connection!");
            console.warn(reason);
        })

        function start() {
            projects.list.forEach(e => {
                console.log(e);

                $buildWaitList[e.id] = true;

                if (!e.rawdata) {
                    $waitList[e.id] = false;
                    if (e.id == "stoppoint") {
                        delete $waitList[e.id];
                        build(e);
                    } else {
                        fetch("https://api.modrinth.com/v2/project/" + e.platforms["modrinth-id"], {
                            method: "GET",
                            headers: {
                                "User-Agent": "StoryAnvil/storyanvil.github.io/homepage (denisJavaOffical@yandex.ru)",
                            },
                        }).then((response) => {
                            response.json().then(
                                (data) => {
                                    e.data = data;
                                    delete $waitList[e.id];
                                    build(e);
                                }
                            ).catch((reason) => {
                                console.warn(reason);
                                delete $waitList[e.id];
                                build(e);
                            })
                        }).catch((reason) => {
                            console.warn(reason);
                            delete $waitList[e.id];
                            build(e);
                        })
                    }
                } else {
                    build(e);
                }
            });
        }

        function build(e) {
            console.log(e.id)
            if (e.id == "stoppoint") {
                postBuilds();
                return;
            }
            let type = "";
            if (e.rawdata) { e.data = e.rawdata }
            if (e.data) { type = e.data.project_type }
            if (e.datapack == true) { type = "datapack" }
            $html[(!e.archived ? typeToId[type] : "prlist_archived")] += `<div id="${"pr_" + e.id}" class="pr-card${url.searchParams.get('id') == e.id ? " pr-active" : ""}">
                            <div>
                                <div style="position: relative;">
                                    <img class="pr-banner" title="project banner" src="${e.data.gallery[0].url}">
                                    <img class="pr-logo" title="project logo" src="${e.data.icon_url}">
                                </div>
                                <div style="padding-left: 15px;">
                                    ${e.data.description}
                                </div>
                            </div>

                            <div style="padding: 20px;">
                                ${e.wiki ? `<a href="${e.wiki}"><img alt="Static Badge" src="https://img.shields.io/badge/-Wiki-gray?style=flat-square&logo=gitbook"></a>` : ""}
                                ${e.data && e.archived ? `<img alt="${type}" src="https://img.shields.io/badge/-${type}-red?style=flat-square">` : ``}
                                ${e.platforms.curseforge ? `<a href="${e.platforms['curseforge']}"><img alt="CurseForge Downloads" src="https://img.shields.io/curseforge/dt/${e.platforms['curseforge-id']}?style=flat-square&logo=curseforge&label=Downloads"></a>` : ``}
                                ${e.platforms.modrinth ? `<a href="${e.platforms['modrinth']}"><img alt="Modrinth Downloads" src="https://img.shields.io/modrinth/dt/${e.platforms['modrinth-id']}?style=flat-square&logo=modrinth&label=Downloads"></a>` : ``}
                                ${e.platforms.pmc ? `<a href="${e.platforms.pmc}"><img alt="Static Badge" src="https://img.shields.io/badge/-Planet%20MC-gray?style=flat-square"></a>` : ""}
                            </div>
                        </div>`;
            (!e.archived ? idToElement[typeToId[type]] : idToElement["prlist_archived"]).innerHTML = $html[(!e.archived ? typeToId[type] : "prlist_archived")];
            if (url.searchParams.get('id') == e.id) { document.getElementById("pr_" + e.id).scrollIntoView() };

            if (url.searchParams.get('downloadid') == e.id) {
                document.getElementById("copyrightnoticeRaw").style.display = "none";
                document.getElementById("copyrightnotice").style.display = "block";
                document.getElementById("homepage").style.display = "none";
                document.getElementById("dwnbody").innerHTML = `<p>Click on badge below.</p><br>${e.platforms.curseforge ? `<a href="${e.platforms['curseforge']}"><img alt="CurseForge Downloads" src="https://img.shields.io/curseforge/dt/${e.platforms['curseforge-id']}?style=flat-square&logo=curseforge&label=Downloads"></a>` : ``}<br>${e.platforms.modrinth ? `<a href="${e.platforms['modrinth']}"><img alt="Modrinth Downloads" src="https://img.shields.io/modrinth/dt/${e.platforms['modrinth-id']}?style=flat-square&logo=modrinth&label=Downloads"></a>` : ``}`;
                document.getElementById("dwntitle").innerHTML = "Download " + e.name;
                document.getElementById("downloadprompt").style.display = "block";
                document.getElementById("copyrightnotice").style.position = "fixed";
                document.getElementById("copyrightnotice").style.bottom = "0px";
            }
            delete $buildWaitList[e.id];
        }
        function postBuilds() {
            clearInterval(buildWaiter);
            if ($html.prlist_modpacks == "") { idToElement["prlist_modpacks"].style.display = "none"; document.getElementById("prlist_modpacks_title").style.display = "none"; }
            if ($html.prlist_mods == "") { idToElement["prlist_mods"].style.display = "none"; document.getElementById("prlist_mods_title").style.display = "none"; }
            if ($html.prlist_rp == "") { idToElement["prlist_rp"].style.display = "none"; document.getElementById("prlist_rp_title").style.display = "none"; }
        }
    </script>
</body>

</html>
